---
meta:
    title: 'What is a Self-Join and when is it used?'
    description: 'A Self-Join in SQL joins a table with itself, useful for handling hierarchies and comparing rows. Learn how and when to use a Self-Join.'
---

> **A Self-Join** is a type of join in SQL where a table is joined with itself.
> It is useful when you need to compare rows within the same table or handle hierarchical data.

## When to use a Self-Join:

-   **Hierarchical structures**
    For example, in an employee table where each employee may have a manager who is also an employee in the same table.
-   **Comparing records**
    To find duplicates or compare values between different rows in the same table.

## Example

export const exampleFields = ['employeeId', 'name', 'managerId'];
export const exampleRows = [
    {
        employeeId: 1,
        name: 'John',
        managerId: null,
    },
    {
        employeeId: 2,
        name: 'Michail',
        managerId: 1,
    },
    {
        employeeId: 3,
        name: 'Alisa',
        managerId: 1,
    },
    {
        employeeId: 4,
        name: 'Max',
        managerId: 2,
    },
];

Consider the following employee data:

<QueryTable
    tableData={{
        fields: exampleFields,
        rows: exampleRows,
    }}
    maxLines={4}
/>

To get a list of employees and their managers:

```sql
SELECT e.name AS Employee, m.name AS Manager
FROM Employee e
LEFT JOIN Employee m ON e.managerId = m.employeeId;
```

In this query, we join the `Employee` table with itself to match each employee with their manager.
